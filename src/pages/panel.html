<!DOCTYPE html>
<html ng-app="dwrexplorer">
<head>
    <title>DWR Explorer</title>
    <link rel="stylesheet" type="text/css" href="../css/dwrexplorer.css">
    <script src="../lib/cycle.js"></script>
    <script src="../lib/angular.js"></script>
    <script src="../lib/ngClipboard.js"></script>
    <script src="../lib/ngResizer.js"></script>
    <script src="../lib/ngObject.js"></script>
</head>
<body>
<main ng-controller="AppController">
    <aside class="sidePanel">
        <div class="toolbarContainer">
            <div class="clearItems" ng-click="clearItems();"></div>
            <input class="filterItems" placeholder="Enter Regular Expression" ng-model="filterPattern"></input>
        </div>
        <div class="entriesContainer">
            <ol class="dwrList">
                <li ng-repeat="dwr in dwrs" class="dwrEntry" ng-class="{selected: dwr === selectedDWR}"
                    ng-show="isVisible(dwr);" ng-click="selectEntry($event, dwr);"
                    title="{{dwr.har.request.url}}">
                    {{dwr.name}}
                </li>
            </ol>
        </div>
    </aside>
    <div class="separator"
         ng-resizer="vertical"
         ng-resizer-left=".sidePanel" 
         ng-resizer-right=".detailPanel"
         ng-resizer-left-min="150"
         ng-resizer-width="6"></div>
    <div class="detailPanel">
        <div class="toolbarContainer">
            <a href="javascript:void(0);" class="toolbarTabButton"
                ng-class="{selected: isCurrentTab('RESPONSE')}" ng-click="switchTab('RESPONSE')">Response</a>
            <a href="javascript:void(0);" class="toolbarTabButton"
                ng-class="{selected: isCurrentTab('REQUEST')}" ng-click="switchTab('REQUEST')">Request</a>
        </div>
        <div class="detailPanelContainer" ng-if="selectedDWR">
            <div ng-style="{display: isCurrentTab('RESPONSE') ? 'block': 'none'}">
                <ng-object object="selectedDWR.parsedResponse" ></ng-object>
            </div>
            <div ng-style="{display: isCurrentTab('REQUEST') ? 'block': 'none'}">
                <!-- TODO: no request/response hint -->
                <section class="requestCallDetail" ng-repeat="call in selectedDWR.parsedRequest">
                    <h1 class="callTitle" ng-if="selectedDWR.parsedRequest.length > 1">Call {{$index + 1}}</h1>
                    <div ng-repeat="param in call track by $index">
                        <h2 class="paramTitle" ng-if="call.length > 1">Param {{$index + 1}}</h2>
                        <ng-object object="param" ></ng-object>
                    </div>
                </section>
            </div>
        </div>
    </div>
</main>
<iframe id="sandbox" src="../sandbox.html" style="display: none;"></iframe>

<script src="../js/dwr2script.js"></script>
<script src="../js/appController.js"></script>

</body>
</html>